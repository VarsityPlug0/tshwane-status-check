<!DOCTYPE html>
<html>

<head>
    <title>ITS iEnabler</title>
    <meta http-equiv="X_UA-Compatible" content="IE=9">
    <meta http-equiv="Expires" content="-1">
    <link rel="stylesheet" type="text/css" href="/itsincludes/css/itscustom.css">
    <script type="text/javascript" src="/itsincludes/js/its_scripts.js"></script>
    <script type="text/javascript" src="/itsincludes/js/overlib.js"></script>
    <meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE">
    <link rel="stylesheet" href="styles.css">
    <script language="Javascript1.2">
        function Call_calendar(ctl) {
            if (ctl.value == '') {
                ctl.value = '08-JAN-2025';
            }
            window.dateField = ctl;
            calendar = window.open('w01pkg.call_cal', 'cal', 'WIDTH=250,HEIGHT=350');
            return false;
        }
    </script>
    <script language="Javascript1.2">
        function chk_mandatory() {
            if ((document.frmOne.x_idno.value != "") ||
                (document.frmOne.x_idno.value == "" &&
                    document.frmOne.x_surn.value == "" &&
                    document.frmOne.x_names.value == "" &&
                    document.frmOne.x_birdat.value == "")) {
                document.getElementById("z_idno").style.display = "block";
                document.getElementById("z_surn").style.display = "none";
                document.getElementById("z_names").style.display = "none";
                document.getElementById("z_birdat").style.display = "none";
            } else {
                document.getElementById("z_idno").style.display = "none";
                document.getElementById("z_surn").style.display = "block";
                document.getElementById("z_names").style.display = "block";
                document.getElementById("z_birdat").style.display = "block";
            }
        }
    </script>
    <style>
        body {
            background-image: url('/itsimages/TUT10year.jpg');
            background-repeat: no-repeat;
            background-position: left top;
            background-size: 100% 180px;
        }

        #alignInMiddle {
            margin-left: auto;
            margin-right: auto;
            margin-top: 180px;
            width: 80%;
            background-color: #ECE9D8;
            position: relative;
            border: 1px solid black;
        }

        .calendar-icon {
            font-size: 18px;
            cursor: pointer;
            color: blue;
        }
    </style>
</head>

<body class="framebody" topmargin="0" leftmargin="0" marginwidth="0" marginheight="0">
    <div id="overDiv" style="position:absolute; visibility:hidden; z-index:1000;"></div>
    <script>
        function noBack() {
            window.history.forward();
        }
        noBack();
        window.onload = noBack;
        window.onpageshow = function (evt) {
            if (evt.persisted) noBack();
        }
        window.onunload = function () {
            void (0);
        }
    </script>
    <form name="frmOne" onsubmit="return redirectToStatusPage();">
        <div id="alignInMiddle">
            <h3>Enter ID Number to be able to see Application Status and Student Number</h3>
            <table>
                <tbody>
                    <tr>
                        <td>ID Number</td>
                        <td width="10px">
                            <font class="mandatory_fld" id="z_idno" style="display: block;">*</font>
                        </td>
                        <td width="90%"><input type="text" name="x_idno" size="15" maxlength="15" value="" id="x_idno">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3" align="center"><b>OR</b></td>
                    </tr>
                    <tr>
                        <td>Student Number</td>
                        <td width="10px"></td>
                        <td width="90%"><input type="text" name="x_stuno" size="15" maxlength="15" value=""
                                id="x_stuno"></td>
                    </tr>
                    <tr>
                        <td>Pin</td>
                        <td width="10px"></td>
                        <td width="90%"><input type="password" name="x_pin" size="15" maxlength="15" value=""
                                id="x_pin"></td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <h3>Alternatively: Enter the following if you don't have an ID Number</h3>
                        </td>
                    </tr>
                    <tr>
                        <td>Surname</td>
                        <td>
                            <font class="mandatory_fld" id="z_surn" style="display: none;"></font>
                        </td>
                        <td><input type="text" name="x_surn" size="30" maxlength="30" value=""></td>
                    </tr>
                    <tr>
                        <td>Full Name</td>
                        <td>
                            <font class="mandatory_fld" id="z_names" style="display: none;"></font>
                        </td>
                        <td><input type="text" name="x_names" size="30" maxlength="40" value=""></td>
                    </tr>
                    <tr>
                        <td>Date of Birth</td>
                        <td>
                            <font class="mandatory_fld" id="z_birdat" style="display: none;"></font>
                        </td>
                        <td>
                            <input type="text" name="x_birdat" size="12" maxlength="11" value="" />
                            <a onclick="return Call_calendar(document.frmOne.x_birdat);" href="#" class="calendar-icon">
                                <img src="calendar.gif" alt="Calendar Icon">
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <input type="submit" value="Submit">&nbsp;&nbsp;
            <input type="button" value="Restart" onclick="javascript:location.replace('index.html');">
            <br><br>
        </div>
    </form>
    <script language="Javascript1.2">
        document.frmOne.x_idno.onblur = function () { chk_mandatory(); }
        document.frmOne.x_surn.onblur = function () { chk_mandatory(); }
        document.frmOne.x_names.onblur = function () { chk_mandatory(); }
        document.frmOne.x_birdat.onblur = function () { chk_mandatory(); }
        chk_mandatory();

        const users = [
            {
                sno: '261178974',
                pin: '82152',
                id: '0504010970086',
                name: 'MISS LEBOGANG ALUCIA RAMOLLO',
                courses: [
                    {
                        year: '2026',
                        code: 'DP LAW20: Diploma in Law',
                        faculty: 'HUMANITIES',
                        status: 'FA: A: UNCONDITIONAL ACCEPTANCE',
                        choice: '1'
                    },
                    {
                        year: '2026',
                        code: 'DPHM19: Diploma in Hospitality Management',
                        faculty: 'ECONOMICS AND FINANCE',
                        status: 'FA: P: PROVISIONAL ACCEPTANCE',
                        choice: '2'
                    }
                ]
            },
            {
                sno: '260260979',
                pin: '14264',
                id: '0611050643083',
                name: 'MISS ASNATH MASHAO',
                courses: [
                    {
                        year: '2026',
                        code: 'DPFM20: Diploma in Financial Management',
                        faculty: 'ECONOMICS AND FINANCE',
                        status: 'FA: A: UNCONDITIONAL ACCEPTANCE',
                        choice: '1'
                    }
                ]
            }
        ];

        function redirectToStatusPage() {
            const idNumber = document.getElementById('x_idno').value;
            const studentNumber = document.getElementById('x_stuno').value;
            const pin = document.getElementById('x_pin').value;

            // Find user matching either ID OR (Student Number AND Pin)
            const user = users.find(u =>
                u.id === idNumber || (u.sno === studentNumber && u.pin === pin)
            );

            if (user) {
                // Save user to localStorage so status page knows who it is
                localStorage.setItem('currentUser', JSON.stringify(user));
                window.location.href = 'status.html';
                return false;
            } else {
                alert('Login details are incorrect. Please try again.');
                return false;
            }
        }
    </script>
    <span id="PING_IFRAME_FORM_DETECTION" style="display: none;"></span>
</body>

</html>